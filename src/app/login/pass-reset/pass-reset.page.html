<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="login" text=""></ion-back-button>
    </ion-buttons>
    <ion-title>Password Reset</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size-md="6" offset-md="3">

        <ion-card class="ion-margin-top">

          <ion-avatar class="logo">
            <img src="assets/images/login_logo.jpg" alt="">
          </ion-avatar>

          <ion-card-content>
            <br><br><br>
            <div [ngSwitch]="step">
              <form [formGroup]="formData">
                <div *ngSwitchCase="1">
                  <ion-item>
                    <ion-label position="stacked">Email</ion-label>
                    <ion-input type="text" placeholder="Enter your registered email" formControlName="email"></ion-input>
                  </ion-item>

                  <br><br>
                  <div class="ion-margin-vertical">
                    <ion-button type="submit" expand="block" shape="round" color="tertiary" (click)="email_verify(formData.value)">NEXT</ion-button>
                  </div>
                </div>

                <div *ngSwitchCase="2">
                  <ion-item>
                    <ion-label position="stacked">OTP</ion-label>
                    <ion-input type="number" placeholder="Enter OTP received in mail" formControlName="otp"></ion-input>
                  </ion-item>

                  <br><br>
                  <div class="ion-text-center">
                    <p>Didn't receive the OTP? Click resend code below which will be activated in ({{time}} secs).</p> 
                    <ion-button fill="clear" disabled="{{resendBtn}}" (click)="resend()">Resend Code</ion-button></div>
                  <br><br>

                  <div class="ion-margin-vertical">
                    <ion-button type="submit" expand="block" shape="round" color="tertiary" (click)="otp_verify(formData.value)">NEXT</ion-button>
                  </div>
                </div>

                <div *ngSwitchCase="3">
                  <ion-item>
                    <ion-label position="stacked">Password</ion-label>
                    <ion-input type="password" placeholder="Enter New Password" formControlName="pass"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="stacked">Confirm Password</ion-label>
                    <ion-input type="password" placeholder="Retype Password" formControlName="cnfmPass"></ion-input>
                  </ion-item>

                  <br><br>
                  <div class="ion-margin-vertical">
                    <ion-button type="submit" expand="block" shape="round" color="tertiary" (click)="pass_reset(formData.value)">RESET</ion-button>
                  </div>
                </div>
              </form>
            </div>
          </ion-card-content>

        </ion-card>

      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>
